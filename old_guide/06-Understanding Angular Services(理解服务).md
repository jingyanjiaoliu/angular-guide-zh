## 什么是服务？

服务是单实例对象或者函数，用来实现web应用里常见的特定任务。
ng有很多内置的服务，比如[$http service服务](http://docs.angularjs.org/api/ng.$http)，它提供了对浏览器`XMLHttpRequest`对象的访问，用以实现向服务器发出请求。
就像其他ng核心的变量和标识符一样，内置的服务名都以`$`开头(比如上面提到的`$http`)。当然，你也能创建自定义的服务。

## 使用服务

为了使用某个服务，你需要指定其他组件(例如控制器，其他服务，过滤器或指令)依赖于该服务，剩下的就交给ng的依赖注入子系统吧。ng依赖注入子系统负责服务实例化、依赖解析并按声明向组件提供依赖。


ng的依赖注入使用["构造器注入"](http://misko.hevery.com/2009/02/19/constructor-injection-vs-setter-injection/)，在这种注入方式中，依赖是被当作参数传入组件的工厂方法或构造函数里。由于JavaScript是一种动态类型语言，ng的依赖注入子系统就不能使用静态类型来指定依赖的服务。因此一个组件必须使用[依赖注入注解](http://docs.angularjs.org/guide/di)方法中的一种来声明它的依赖。
例如，提供`$inject`属性：

 		var MyController = function($location) { ... };
        MyController.$inject = ['$location'];
        myModule.controller('MyController', MyController);

或者提供"内联"注入注解：

        var myService = function($http) { ... };
        myModule.factory('myService', ['$http', myService]);


## 定义服务

应用开发者可通过在ng的模块中注册服务的名字和**服务工厂方法**来自由的定义服务。

**服务工厂方法**的目的就是生成单实例对象或者函数，这些单实例对象或者函数对于应用的其他部分来说就代表着该服务。当任何组件声明将该服务作为依赖时，这个对象或者函数就会被注入到该组件中(包括控制器、其他服务、过滤器或指令)。


ng工厂方法是延迟执行的，也就是说，仅当需要满足依赖声明时才会被执行，并且只会被执行一次。依赖于该服务的所有对象都共享**服务工厂方法**生成的单实例对象的引用。


## 相关主题

* [依赖注入](http://docs.angularjs.org/guide/di)
* [创建服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)
* [管理服务依赖](http://docs.angularjs.org/guide/dev_guide.services.managing_dependencies)
* [测试服务](http://docs.angularjs.org/guide/dev_guide.services.testing_services)

## 相关API

* [服务API](http://docs.angularjs.org/api/ng)
* [注入器API](http://docs.angularjs.org/api/angular.injector)

## What are Angular Services?

Angular services are singletons objects or functions that carry out specific tasks common to web apps.
Angular has a number of built in services, such as the {@link api/ng.$http $http service}, which
provides access to the browser's `XMLHttpRequest` object for making requests to a server. Like other core
Angular variables and identifiers, the built-in services always start with `$` (such as `$http` mentioned
above). You can also create your own custom services.

## Using a Service

To use an Angular service, you identify it as a dependency for the component (controller, service,
filter or directive) that depends on the service.  Angular's dependency injection subsystem takes
care of the rest. The Angular injector subsystem is in charge of service instantiation, resolution
of dependencies, and provision of dependencies to components as requested.

Angular injects dependencies using
{@link http://misko.hevery.com/2009/02/19/constructor-injection-vs-setter-injection/ "constructor" injection}.
The dependency is passed to the component's factory/constructor function. Because JavaScript is a dynamically
typed language, Angular's dependency injection subsystem cannot use static types to identify service
dependencies. For this reason a component must, explicitly, define its dependencies by using one of the
{@link di injection annotation} methods.  For example, by providing a `$inject` property:

        var MyController = function($location) { ... };
        MyController.$inject = ['$location'];
        myModule.controller('MyController', MyController);

Or by providing an "inline" injection annotation:

        var myService = function($http) { ... };
        myModule.factory('myService', ['$http', myService]);

## Defining a Service

Application developers are free to define their own services by registering their name, and **service
factory function**, in Angular modules.

The purpose of the **service factory function** is to generate the single object, or function, that 
represents the service to the rest of the application. That object, or function, will then be
injected into any component (controller, service, filter or directive) that specifies a dependency
on the service.

Angular factory functions are executed lazily. That is, they are only executed when needed 
to satisfy a dependency, and are then executed exactly once for each service. Everything that is
dependent on this service gets a reference to the single instance generated by the service factory.

## Related Topics

* {@link di About Angular Dependency Injection}
* {@link dev_guide.services.creating_services Creating Angular Services}
* {@link dev_guide.services.managing_dependencies Managing Service Dependencies}
* {@link dev_guide.services.testing_services Testing Angular Services}

## Related API

* {@link api/ng Angular Service API}
* {@link api/angular.injector Injector API}
